openapi: 3.0.0
info:
  title: Cafeteria Management API
  version: 0.1.0
  description: API для управления столовой (продукты, блюда, меню, заказы)
servers:
  - url: http://localhost:8080
    description: Локальный сервер
tags:
  - name: Products
    description: Операции с продуктами
  - name: Dishes
    description: Операции с блюдами
  - name: DishIngredients
    description: Операции с ингредиентами блюд
  - name: Menu
    description: Операции с меню
  - name: Orders
    description: Операции с заказами
paths:
  # Продукты
  /api/products:
    get:
      tags: [Products]
      summary: Получение списка всех продуктов
      responses:
        200:
          description: Список продуктов
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Product"
    post:
      tags: [Products]
      summary: Добавление нового продукта
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Product"
      responses:
        201:
          description: Продукт успешно добавлен
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
  /api/products/{id}:
    get:
      tags: [Products]
      summary: Получение информации о продукте
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Информация о продукте
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
    put:
      tags: [Products]
      summary: Обновление информации о продукте
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Product"
      responses:
        200:
          description: Продукт успешно обновлен
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Product"
    delete:
      tags: [Products]
      summary: Удаление продукта
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Продукт успешно удален

  # Блюда
  /api/dishes:
    get:
      tags: [Dishes]
      summary: Получение списка всех блюд
      responses:
        200:
          description: Список блюд
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Dish"
    post:
      tags: [Dishes]
      summary: Добавление нового блюда
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Dish"
      responses:
        201:
          description: Блюдо успешно добавлено
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Dish"
  /api/dishes/{id}:
    get:
      tags: [Dishes]
      summary: Получение информации о блюде
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Информация о блюде
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Dish"
    put:
      tags: [Dishes]
      summary: Обновление информации о блюде
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Dish"
      responses:
        200:
          description: Блюдо успешно обновлено
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Dish"
    delete:
      tags: [Dishes]
      summary: Удаление блюда
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Блюдо успешно удалено

  # Ингредиенты блюд
  /api/dish_ingredients:
    get:
      tags: [DishIngredients]
      summary: Получение списка всех ингредиентов блюд
      responses:
        200:
          description: Список ингредиентов блюд
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DishIngredient"
    post:
      tags: [DishIngredients]
      summary: Добавление нового ингредиента блюда
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DishIngredient"
      responses:
        201:
          description: Ингредиент блюда успешно добавлен
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DishIngredient"
  /api/dish_ingredients/{id}:
    get:
      tags: [DishIngredients]
      summary: Получение информации об ингредиенте блюда
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Информация об ингредиенте блюда
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DishIngredient"
    put:
      tags: [DishIngredients]
      summary: Обновление информации об ингредиенте блюда
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DishIngredient"
      responses:
        200:
          description: Ингредиент блюда успешно обновлен
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DishIngredient"
    delete:
      tags: [DishIngredients]
      summary: Удаление ингредиента блюда
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Ингредиент блюда успешно удален

  # Меню
  /api/menu:
    get:
      tags: [Menu]
      summary: Получение текущего меню
      responses:
        200:
          description: Текущее меню
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MenuItem"
    post:
      tags: [Menu]
      summary: Добавление блюда в меню
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MenuItem"
      responses:
        201:
          description: Блюдо успешно добавлено в меню
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MenuItem"
  /api/menu/{id}:
    get:
      tags: [Menu]
      summary: Получение информации о пункте меню
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Информация о пункте меню
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MenuItem"
    put:
      tags: [Menu]
      summary: Обновление пункта меню
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MenuItem"
      responses:
        200:
          description: Пункт меню успешно обновлен
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MenuItem"
    delete:
      tags: [Menu]
      summary: Удаление пункта меню
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Пункт меню успешно удален

  # Заказы
  /api/orders:
    get:
      tags: [Orders]
      summary: Получение списка всех заказов
      responses:
        200:
          description: Список заказов
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Order"
    post:
      tags: [Orders]
      summary: Создание нового заказа
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Order"
      responses:
        201:
          description: Заказ успешно создан
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"
  /api/orders/{id}:
    get:
      tags: [Orders]
      summary: Получение информации о заказе
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Информация о заказе
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"
    put:
      tags: [Orders]
      summary: Обновление заказа
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Order"
      responses:
        200:
          description: Заказ успешно обновлен
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Order"
    delete:
      tags: [Orders]
      summary: Удаление заказа
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Заказ успешно удален

components:
  schemas:
    Product:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        quantity:
          type: integer
        unit:
          type: string
    Dish:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
        price:
          type: number
          format: float
    DishIngredient:
      type: object
      properties:
        id:
          type: integer
        dish_id:
          type: integer
        product_id:
          type: integer
        quantity:
          type: integer
    MenuItem:
      type: object
      properties:
        id:
          type: integer
        dish_id:
          type: integer
        available:
          type: boolean
    Order:
      type: object
      properties:
        id:
          type: integer
        dish_id:
          type: integer
        quantity:
          type: integer
        order_time:
          type: string
          format: date-time
